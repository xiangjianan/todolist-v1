$(function(){let t=function(){let t=localStorage.getItem("todo-list");return t?JSON.parse(t):[]}();0===t.length&&(t=[["点击空白处，添加任务",!0],["点击右侧删除按钮，管理任务",!0],["单击任务可以修改文本",!0],["双击任务可以切换状态",!0],["存储位置：浏览器Local Storage（非云端）",!0],["双击任务可以切换状态",!1]]);function n(){let n="",o="",e=!1,l=!1;t.forEach(function(t,d){t[1]?(n+=`\n                    <li index=${d}>\n                        <div>\n                            <span class="todo todo-text">${t[0]}</span>\n                            <input type="text" name="" value="${t[0]}">\n                        </div>\n                        <button class="todo-del iconfont">&#xe614;</button>\n                    </li>\n                `,e=!0):(o+=`\n                    <li index=${d}>\n                        <div>\n                            <span class="todo done-text">${t[0]}</span>\n                            <input type="text" name="" value="${t[0]}">\n                        </div>\n                        <button class="todo-del iconfont">&#xe614;</button>\n                    </li>\n                `,l=!0)}),$("#todo-list").html(n),$("#done-list").html(o)," "===$("#del").text()&&$(".todo-del").css("display","inline-block"),l?$(".done-flag").stop().fadeIn(300):$(".done-flag").stop().fadeOut(300),function(){let n=JSON.stringify(t);localStorage.setItem("todo-list",n)}()}n();let o=!1,e=!1;$(".wall").click(function(){o?($("#del").html("&#xe614;"),$(".todo-del").stop().fadeOut(300),o=!1):e?($("#add-todo").blur(),$("#add-todo").css("background-color","rgba(255,255,255,0.3)"),e=!1):($("#add-todo").focus(),$("#add-todo").css("background-color","rgba(255,255,255,0.8)"),e=!0)}),$("#add-todo").click(function(){return $("#add-todo").focus(),$("#add-todo").css("background-color","#fff"),e=!0,!1}),$("#add-todo").keydown(function(o){13===o.keyCode&&$(this).val()&&(t.unshift([$(this).val(),!0]),$(this).val(""),n())}),$("#del").click(function(){return o?($(this).html("&#xe614;"),$(".todo-del").stop().fadeOut(300),o=!1):($(this).html("&#xe614; "),$(".todo-del").stop().fadeIn(300),o=!0),!1}),$("ul").on("click",".todo-del",function(){return t.splice($(this).parent().attr("index"),1),n(),!1});let l=null;var d,a;$("ul").on("click","span",function(){clearTimeout(l);let o=$(this);return l=setTimeout(function(){let e=o.parent().parent().attr("index");o.siblings().css({"z-index":3,background:"#f9f9f9"}),o.siblings().select(),o.siblings().keydown(function(o){13===o.keyCode&&(t[e][0]=$(this).val(),$(this).val()||t.splice(e,1),n())}),o.siblings().blur(function(){$(this).css({"z-index":1,background:"#fff",border:"none"}),t[e][0]=$(this).val(),$(this).val()||t.splice(e,1),n()})},250),!1}),$("ul").on("dblclick","span",function(){clearTimeout(l);let o=$(this).parent().parent().attr("index");return t[o][1]=!t[o][1],n(),!1}),d="body",a=function(t){return o?($(this).html("&#xe614;"),$(".todo-del").stop().fadeOut(300),o=!1):($(this).html("&#xe614; "),$(".todo-del").stop().fadeIn(300),o=!0),!1},$(document).delegate(d,"contextmenu",function(t){t.preventDefault()}),$(document).delegate(d,"mousedown",function(t){var n=$(this);3==t.which&&"function"==typeof a&&a(n)}),$(".footer #del_done").click(function(){let e=[];for(i=0;i<t.length;i++)t[i][1]&&e.push(t[i]);return t=e,o?($("#del").html("&#xe614;"),$(".todo-del").stop().fadeOut(300),o=!1):($("#del").html("&#xe614; "),$(".todo-del").stop().fadeIn(300),o=!0),n(),!1}),$(".title").on("click","#readme",function(){return event.preventDefault(),alert("使用说明\n        添加任务：\n                方法1：点击输入框\n                方法2：左击页面空白处\n        删除任务：\n                方法1：点击删除按钮\n                方法2：右击页面空白处\n        修改任务：单击任务\n        切换状态：双击任务\n存储位置：浏览器Local Storage（非云端）"),!1}),console.log("\nGitHub: https://github.com/xiangjianan\n\nEmail: xiang9872@gmail.com\n\nPage: www.helloxjn.com\n\n")});